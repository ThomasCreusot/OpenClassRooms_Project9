{% extends 'base.html' %}

{% load reviews_app_extras %}


{% block content %}

    <p>Vos posts</p>

    {% for instance in my_tickets_and_reviews %}
        {% if instance|model_type == 'Ticket' %}
            <div class="ticket">
                <p>Vous avez publié un ticket</p>
                <p>{{ instance.time_created }}</p> 
                <p>{{ instance.title }}</p>

                {% if instance.image %}
                    <img src="{{ instance.image.url }}">
                {% endif %}


                <button><a href="{% url 'ticket-update' instance.id %}">Modifier</a></button>    
                <button><a href="{% url 'ticket-delete' instance.id %}">Supprimer</a></button>    
            </div>



        {% elif instance|model_type == 'Review' %}
            <div class="review">
                <p>Vous avez publié une critique</p>
                <p>{{ instance.time_created }}</p>
                <p>{{ instance.headline }}</p>
                <p>{{ instance.rating }}</p>
                <p>{{ instance.body }}</p>

                <div class="ticket-in-review">
                    <p>Ticket - Vous</p>
                    <p>{{ instance.ticket.time_created }}</p>
                    <p>{{ instance.ticket.title }}</p>
                    {% if instance.ticket.image %}
                        <img src="{{ instance.ticket.image.url }}">
                    {% endif %}
                </div>

                <button><a href="{% url 'review-update' instance.id %}">Modifier</a></button>    
                <button><a href="{% url 'review-delete' instance.id %}">Supprimer</a></button>    
            </div>
        {% endif %}
    <br>
    {% endfor %}


{% endblock content %}
